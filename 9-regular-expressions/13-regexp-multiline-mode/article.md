# Многострочный режим, флаг "m"

Многострочный режим включается флагом `pattern:/.../m`.

В этом случае изменяется поведение `pattern:^` и `pattern:$`.

В многострочном режиме они означают не только начало/конец текста, но и начало/конец строки.

## Начало строки ^

В примере ниже текст состоит из нескольких строк. Паттерн `pattern:/^\d+/gm` берёт число с начала каждой строки:

```js run
let str = `1е место: Винни
2е место: Пятачок
33е место: Слонопотам`;

*!*
alert( str.match(/^\d+/gm) ); // 1, 2, 33
*/!*
```

<<<<<<< HEAD
Обратим внимание -- без флага  `pattern:/.../m` было бы найдено только первое число:
=======
The regexp engine moves along the text and looks for a line start `pattern:^`, when finds -- continues to match the rest of the pattern `pattern:\d+`.
>>>>>>> 5e9eca374f644ea85c7d548bbe344fd30e5fb89d

Without the flag  `pattern:/.../m` only the first number is matched:

```js run
let str = `1е место: Винни
2е место: Пятачок
33е место: Слонопотам`;

*!*
alert( str.match(/^\d+/g) ); // 1
*/!*
```

<<<<<<< HEAD
Так происходит, потому что в обычном режиме каретка `pattern:^` -- это только начало текста, а в многострочном -- начало любой строки.

Движок регулярных выражений двигается по тексту в поисках строки, начинающейся с `pattern:^`, и как находит -- продолжает искать в ней `pattern:\d+`.
=======
That's because by default a caret `pattern:^` only matches at the beginning of the text, and in the multiline mode -- at the start of any line.
>>>>>>> 5e9eca374f644ea85c7d548bbe344fd30e5fb89d

## Конец строки $

Символ доллара `pattern:$` ведёт себя аналогично.

Регулярное выражение `pattern:\w+$` ищет последнее слово в каждой строке

```js run
let str = `1е место: Винни
2е место: Пятачок
33е место: Слонопотам`;

alert( str.match(/\w+$/gim) ); // Винни,Пятачок,Слонопотам
```

Без флага `pattern:/.../m` якорь `pattern:$` обозначал бы конец всей строки, и было бы найдено только последнее слово.

## Якорь ^$ против \n

Для того, чтобы найти конец строки, можно использовать не только `pattern:^` и `pattern:$`, но и символ перевода строки `\n`.

Но, в отличие от `pattern:$`, движок регулярных выражений берёт символ `\n` в результат.

Используем его в нашем примере вместо `pattern:$`:

```js run
let str = `1е место: Винни
2е место: Пятачок
33е место: Слонопотам`;

alert( str.match(/\w+\n/gim) ); // Винни\n,Пятачок\n
```

Здесь каждое совпадение -- это слово плюс символ перевода строки.

Ещё одно отличие -- символ перевода строки `\n` не обязательно является концом строки. Вот почему слово `Слонопотам` не вывелось в примере выше.

Таким образом, использование якорей обычно лучше и точнее соответствуют тому, что мы хотим получить в результате.
