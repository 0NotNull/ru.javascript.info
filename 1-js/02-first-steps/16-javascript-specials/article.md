# Особенности JavaScript

Давайте кратко пройдёмся по изученному материалу и отметим наиболее «хитрые» моменты. 

## Структура кода

Инструкции разделяются точкой с запятой:

```js run no-beautify
alert('Привет'); alert('Мир');
```

Разделителем вполне может быть и простой перевод строки:

```js run no-beautify
alert('Привет')
alert('Мир')
```

Это так называемая «автоматическая вставка точки с запятой». Впрочем, данный метод не всегда полезен:

```js run
alert("После этого сообщения ждите ошибку")

[1, 2].forEach(alert)
```

Большинство руководств по написанию кода рекомендуют всё-таки завершать инструкции точкой с запятой.

Явный разделитель не требуется после закрывающей фигурной скобки в блоках `{...}` и синтаксических конструкций с их применением, например, циклов:

```js
function f() {
  // после объявления функции точку с запятой ставить необязательно 
}

for(;;) {
  // после данного цикла также необязательна точка с запятой
}
```

Но если даже и поставить разделитель, ошибки здесь нет и ввод будет проигнорирован.

Подробности: <info:structure>.

## Строгий режим

Чтобы по максимуму использовать возможности современного JavaScript, все скрипты рекомендуется начинать с задания директивы `"use strict"`.

```js
'use strict';

...
```

Директиву следует размещать вверху скрипта или в начале тела функции.

Впрочем, `"use strict"` можно и пренебречь, но в таком случае код будет работать в режиме «совместимости» со старыми версиями языка JavaScript, тогда как мы стремимся использовать его самые современные возможности.

В некоторых характеристиках языка (например, в ещё не известных нам классах), строгий режим используется по умолчанию.

Подробности: <info:strict-mode>.

## Переменные

Способы объявления переменных: 

- `let`
- `const` (константа, т.е. изменению не подлежит)
- `var` (устаревший способ, подробности ниже)

В имени переменной допустимы следующие знаки:
- Латинские буквы и цифры, однако цифра не может быть первым символом. 
- Символы `$` и `_` используются наряду с буквами.
- Иероглифы и символы нелатинского алфавита также допустимы, но используются нечасто.

При объявлении переменной мы не навязываем ей определённого типа данных, поэтому в ней можно хранить любые значения:

```js
let x = 5;
x = "Пятница";
```

Всего существует 7 типов данных:

- `number` —  целые и вещественные числа,
- `string` – строки,
- `boolean` – логические значения истинности или ложности: `true/false`,
- `null` – тип с единственным значением `null`, т.е. «пустое значение» или «значение не существует»,
- `undefined` – тип с единственным значением `undefined`, т.е. «значение не присвоено»,
- `object` и `symbol` – сложные структуры данных и уникальные идентификаторы; их мы изучим позже.

Оператор `typeof` возвращает тип значения переменной, но и здесь не без особенностей:
```js
typeof null == "object" // это баг самого JavaScript
typeof function(){} == "function" // функции в языке на особом счету
```

Подробности: <info:variables>, <info:types>.

## Диалоговые и всплывающие окна

Наша рабочая среда – это браузер, поэтому на клиенте применяются следующие функции:

[`prompt(вопрос, [default])`](mdn:api/Window/prompt)
: Задаём посетителю `вопрос` и ждём от него ответ. На выходе получаем либо строку с ответом, либо `null`, если посетитель нажал на кнопку «Отмена».

[`confirm(question)`](mdn:api/Window/confirm)
: Задаём посетителю `вопрос`, на который он сможет ответить с помощью кнопок «ОК» или «Отмена», что вернёт нам `true` или `false`, соответственно.

[`alert(сообщение)`](mdn:api/Window/alert)
: Выводим `сообщение`.

Данные функции *модальны*, то есть пока посетитель не даст свой ответ, исполнение кода будет приостановлено и всякое взаимодействие со страницей будет невозможно.

Приведём пример:

```js run
let userName = prompt("Как тебя зовут?", "Алиса");
let isTeaWanted = confirm("Выпьешь чаю?");

alert( "Посетитель: " + userName ); // Алиса
alert( "Чаепитие состоялось: " + isTeaWanted ); // true, т.е. да
```

Подробности: <info:alert-prompt-confirm>.

## Операторы

В JavaScript предусмотрены следующие операторы:

Арифметические
: привычные всем `* + - /`, а также деление по модулю `%` и возведение в степень `**`.

    Бинарный `+` объединяет строки. А если одним из операндов окажется строка, то второй также будет приведён к строковому типу:

    ```js run
    alert( '1' + 2 ); // '12', строка
    alert( 1 + '2' ); // '12', строка
    ```

Операторы присваивания
: простые `a = b` и составные `a *= 2`.

Поразрядные операторы
: применяются с целыми числами на битовом уровне. Подробнее об их использовании можно прочитать в [docs](mdn:/JavaScript/Reference/Operators/Bitwise_Operators).

Тернарный оператор
: единственный оператор с тремя параметрами: `условие ? результат1 : результат2`. Если `условие` истинно, то возвращается `результат1`, иначе – `результат2`.

Логические операторы
: логические И `&&`, ИЛИ `||` выполняют так называемые «ленивые вычисления» и по их завершении возвращают `true` или `false`. Логическое НЕТ `!` приводит операнд к логическому типу и возвращает его инвертированное значение.

Сравнение
: при сравнении двух разнотиповых значений оператор `==` приводит их к числовому типу данных (за исключением `null` и `undefined`, которые могут равняться только самим себе), так что следующие примеры идентичны:

    ```js run
    alert( 0 == false ); // true
    alert( 0 == '' ); // true
    ```

    Другие операторы сравнения также конвертируют значения в число.

    Оператор строгого равенства `===` конвертирования не выполняет, и для него разные типы всегда означают разные значения, так что:

    Значения `null` и `undefined` особенны: они равны `==` только самим себе и не равняются ничему иному.

    Операторы сравнения `>`(больше)/`<`(меньше) посимвольно сравнивают строки, а остальные типы приводят к строке.

Другие операторы
: существуют и другие операторы, такие как запятая.

Подробности: <info:operators>, <info:comparison>, <info:logical-operators>.

## Циклы Loops

- Нами изучено три вида циклов:

    ```js
    // 1
    while (condition) {
      ...
    }

    // 2
    do {
      ...
    } while (condition);

    // 3
    for(let i = 0; i < 10; i++) {
      ...
    }
    ```

- Переменная, объявленная в цикле `for(let...)`, видима только в самом цикле. Но если опустить `let`, то такую переменную можно будет переиспользовать и за пределами цикла.
- Директивы `break/continue` позволяют выйти из цикла или текущей итерации, а вложенные циклы можно прекратить с помощью меток.

Подробности: <info:while-for>.

Позже мы изучим также циклы, работающие с объектами.

## Конструкция "switch"

Одна единственная конструкция "switch" заменяет собой несколько проверок `if`. При сравнении используется оператор строгого равенства `===`.

Например:

```js run
let age = prompt('Сколько тебе лет?', 18);

switch (age) {
  case 18:
    alert("Некорректный ввод"); // prompt возвращает строку, а не число, поэтому "18" !== 18

  case "18":
    alert("Всё верно!");
    break;

  default:
    alert("Введено значение, отличающееся от предусмотренных вариантов");
}
```

Подробности: <info:switch>.

## Функции

Мы рассмотрели три способа создания функции в JavaScript:

1. Объявление: функция задаётся в основном потоке кода

    ```js
    function sum(a, b) {
      let result = a + b;

      return result;
    }
    ```

2. Функциональное выражение: функция задаётся в контексте выражения

    ```js
    let sum = function(a, b) {
      let result = a + b;

      return result;
    }
    ```

    У функционального выражения может быть имя, например, `сумма = function имя(a, b)`, но это `имя` видимо только внутри функции.

3. Стрелочные функции:

    ```js
    // выражение в правой части
    let sum = (a, b) => a + b;

    // многострочный код в фигурных скобках { ... } и инструкцией return:
    let sum = (a, b) => {
      // ...
      return a + b;
    }

    // функция без аргументов
    let sayHi = () => alert("Привет");

    // функция с одним аргументом
    let double = n => n * 2;
    ```


- Переменная, объявленная внутри функции, называется локальной переменной. Она видима только внутри функции.
- У параметров могут быть значения по умолчанию: `function sum(a = 1, b = 2) {...}`.
- Функции всегда возвращают определённое значение. При отсутствии инструкции `return` результатом выполнения будет `undefined`.


| Объявленная функция | Функциональное выражение |
|----------------------|---------------------|
| видима во всём блоке кода | создаётся при выполнении участка кода с выражением |
|   - | может иметь имя, видимое в пределах самой функции |

Подробности: <info:function-basics>, <info:function-expressions-arrows>.

## Дальше – больше

Здесь описаны только базовые возможности JavaScript. Читайте дальше и узнайте, на что по-настоящему способен этот язык программирования!
