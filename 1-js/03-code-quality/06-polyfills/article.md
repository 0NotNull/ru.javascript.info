
# Полифилы

JavaScript - динамично развивающийся язык программирования. Регулярно появляются новые предложения, они анализируются и, если предложения одобряются, их переносят в черновик <https://tc39.github.io/ecma262/>, а затем публикуют в [спецификации](http://www.ecma-international.org/publications/standards/Ecma-262.htm).

Разработчики JavaScript движков сами принимают решение какие предложения реализовать в первую очередь. Они могут заранее реализовать функции, которые находятся в черновике и отложить разработку функций, которые уже перенесены в спецификацию, всё потому что некоторые функции могут быть менее интересны разработчикам, а может их сложнее реализовать.

Таким образом, довольно часто реализуется только часть стандарта.

Можно проверить текущее состояние поддержки различных возможностей JavaScript на странице <https://kangax.github.io/compat-table/es6/> (нам предстоит многое ещё изучить).

## Babel

Когда мы используем современные JavaScript функции, некоторые движки могут не поддерживать их. Как и было сказано выше, не все функции могут поддерживаться различными движками.

И тут приходит на помощь Babel.

[Babel](https://babeljs.io) - это [транспилер](https://en.wikipedia.org/wiki/Source-to-source_compiler). Он переписывает современные JavaScript функции в предыдущий стандарт.

На самом деле, есть две части Babel:

1. Во-первых, транспилер, который переписывает код. Разработчик запускает Babel на своём компьютере. Он переписывает код в старый стандарт. И после, код отправляется на сайт. Современные сборщики проектов, такие как [webpack](http://webpack.github.io/) или [brunch](http://brunch.io/), предоставляют возможность запускать транспилер автоматически, после каждого изменения кода, что позволяет экономить время.

2. Во-вторых, полифил.

    Транспилер переписывает код, поэтому синтаксис сохраняется. Но для новых функций нам необходимо написать скрипт, который будет поддерживать их. JavaScript - гибкий язык программирования, скрипты могут не только содержать новые функции, но и могут расширять встроенные, таким образом можно реализовать поддержку современного стандарта.

    Термин "полифил" означает, что скрипт "заполняет" пробелы и добавляет современные функции.

    Два интересных полифила:
    - [babel polyfill](https://babeljs.io/docs/usage/polyfill/) поддерживает много функций, но очень большой.
    - [polyfill.io](http://polyfill.io) сервис, который позволяет загружать/конструировать полифилы в зависимости от необходимых функций.

Таким образом, чтобы современные функции поддерживались в старых движках, нам надо установить транспилер и добавить полифил.

Если мы ориентируемся на современные движки и не используем функции, которые не везде поддерживаются, то нам не нужен Babel.

## Примеры в учебнике


````online
Большинство примеров можно запустить, как этот:

```js run
alert('Нажмите кнопку "Play", в крайнем правом углу, чтобы запустить пример');
```

Примеры, в которых используются современные JS функции, будут работать, если ваш браузер их поддерживает.
````

```offline
Пример можно запустить только, если вы подключены к сети интернет. Обычно этого не требуется :)
```

Для запуска примеров можно использовать [Chrome Canary](https://www.google.com/chrome/browser/canary.html), но подойдёт и любой другой современный браузер.

Обратите внимание, что для боевого сервера мы можем использовать Babel, чтобы переписывать код в подходящий для нескольких предыдущий версий браузеров. Поэтому, использовать определенную версию браузера не обязательно, код будет работать везде.
