# События: change, input, cut, copy, paste

Давайте обсудим различные события, сопутствующие обновлению данных.

## Событие: change

Событие [change] (http://www.w3.org/TR/html5/forms.html#event-input-change) срабатывает по окончании изменения элемента.

Для текстовых инпутов это означает, что событие происходит при потере фокуса.

Например, пока мы печатаем в текстовом поле в примере ниже, события нет. Но когда мы перемещаем фокус, например, в другое место, нажмите на кнопку - произойдёт событие `change`:

```html autorun height=40 run
<input type="text" onchange="alert(this.value)">
<input type="button" value="Button">
```

Для других элементов: `select`, `input type=checkbox/radio` событие запускается сразу после изменения выбора.

## Событие: input

Событие `input` срабатывает каждый раз при изменении значения.

Например:

```html autorun height=40 run
<input type="text" id="input"> oninput: <span id="result"></span>
<script>
  input.oninput = function() {
    result.innerHTML = input.value;
  };
</script>
```

Если мы хотим обрабатывать каждое изменение в `<input>`, то это событие является лучшим выбором.

В отличие от клавиатурных событий, он работает при любых изменениях значений, даже если они не связаны с клавиатурными действиями: вставка с помощью мыши или распознавание речи для диктата текста.

```smart header="Нельзя ничего предотвратить в `oninput`"
Событие `input` происходит после изменения значения.

Поэтому мы не можем использовать `event.preventDefault()` там - будет уже слишком поздно, никакого эффекта не будет.
```

## События: cut, copy, paste

Эти события происходят при вырезании/копировании/вставке значения.

Они относятся к классу [ClipboardEvent] (https://www.w3.org/TR/clipboard-apis/#clipboard-event-interfaces) и обеспечивают доступ к копируемым/вставляемым данным.

Мы также можем использовать `event.preventDefault()` для прерывания действия.

Например, код, приведённый ниже, предотвращает все подобные события и показывает, что мы пытаемся вырезать/копировать/вставить:

```html autorun height=40 run
<input type="text" id="input">
<script>
  input.oncut = input.oncopy = input.onpaste = function(event) {
    alert(event.type + ' - ' + event.clipboardData.getData('text/plain'));
    return false;
  };
</script>
```

Технически, мы можем скопировать/вставить всё. Например, мы можем скопировать файл в файловый менеджер ОС и вставить его.

Существует список методов [в спецификации] (https://www.w3.org/TR/clipboard-apis/#dfn-datatransfer) для работы с различными типами данных, чтения/записи в буфер обмена.

Но обратите внимание, что буфер обмена - это "глобальный" уровень ОС. Большинство браузеров разрешают доступ на чтение/запись в буфер обмена только в рамках определённых действий пользователя для безопасности. Также запрещается создавать "пользовательские" события буфера обмена во всех браузерах, кроме Firefox.

## Итого

События изменения данных:

| Событие | Описание | Особенности |
|---------|----------|-------------|
| `change`| Значение было изменено. | Для текстовых входов срабатывает при потере фокуса. |
| `input` | Для ввода текста при каждом изменении. | Запускается немедленно, в отличие от `change`. |
| `cut/copy/paste` | Действия по вырезанию/копированию/вставке. | Действие можно предотвратить. Свойство `event.clipboardData` предоставляет доступ на чтение/запись в буфер обмена.. |
